webpackJsonp([7],{"02RJ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"App",data:function(){return{isShow:!1,province_list:[],city_list:[],area_list:[],fileList:[],form:{person_name:"",license_photo:"",enterprise_name:"",credit_num:"",province:"",city:"",area:"",phone:"",person_id_num:"",email:"",address:""},rules:{enterprise_name:[{required:!0,message:"请输入企业名称",trigger:"blur"}],person_name:[{required:!0,message:"请输入法人名称",trigger:"blur"}],province:[{required:!0,message:"请选择省",trigger:"blur"}],city:[{required:!0,message:"请选择市",trigger:"blur"}],area:[{required:!0,message:"请选择区",trigger:"blur"}],email:[{required:!0,message:"请输入公司邮箱",trigger:"blur"}],phone:[{required:!0,message:"请输入公司电话",trigger:"blur"}],credit_num:[{required:!0,message:"请输入公司社会信用代码号",trigger:"blur"}],person_id_num:[{required:!0,message:"请输入法人身份证号",trigger:"blur"}],address:[{required:!0,message:"请输入公司地址",trigger:"blur"}]}}},created:function(){this.getProvince(),this.getInfo()},methods:{getInfo:function(){var e=this;this.$api.get("/enterprise/get_info",{},function(t){e.form=t.data.data,e.fileList=[{name:"营业执照",url:e.form.license_photo}],e.isShow=2!=e.form.is_certification&&3!=e.form.is_certification})},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},handleRemove:function(e,t){console.log("移除"+e)},uploadImageSuccess:function(e,t,r){this.form.license_photo=e.data.url},handlePictureCardPreview:function(e){console.log(e)},getProvince:function(){var e=this;this.$api.get("api/v1/get_province",{},function(t){e.province_list=t.data.data})},provinceChange:function(e){var t=this;this.$api.get("api/v1/get_area",{pid:e},function(e){t.city_list=e.data.data})},cityChange:function(e){var t=this;this.$api.get("api/v1/get_area",{pid:e},function(e){t.area_list=e.data.data})},dateRes:function(){var e=new Date(this.form.end_time);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},submitForm:function(e){var t=this,r=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.form.end_time=t.dateRes(),console.log(t.form),t.$api.post("enterprise/certification",t.form,function(e){e.data.bol&&(t.$message.success(e.data.msg),setTimeout(function(){r.getInfo()},1500))})})},resetForm:function(e){this.$refs[e].resetFields()}}},a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticStyle:{"margin-left":"50px"}},[r("h3",[e._v("认证信息")]),e._v(" "),1==e.form.is_certification?r("div",{staticClass:"succ"},[e._v("已认证成功，不可修改，如若修改，请联系平台人员")]):e._e(),e._v(" "),2==e.form.is_certification?r("div",{staticClass:"wei"},[e._v("未审核, 请填写信息提交审核")]):e._e(),e._v(" "),3==e.form.is_certification?r("div",{staticClass:"error"},[e._v("审核失败，请修改后重新提交, 原因："+e._s(e.form.failure_why))]):e._e(),e._v(" "),4==e.form.is_certification?r("div",{staticClass:"runing"},[e._v("审核中, 将会在2-3个工作日完成审核")]):e._e()]),e._v(" "),r("div",[r("el-form",{ref:"form",staticClass:"mt15",attrs:{"status-icon":!0,model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"企业名称",prop:"enterprise_name"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{disabled:e.isShow},model:{value:e.form.enterprise_name,callback:function(t){e.$set(e.form,"enterprise_name",t)},expression:"form.enterprise_name"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"法人姓名",prop:"person_name"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{disabled:e.isShow},model:{value:e.form.person_name,callback:function(t){e.$set(e.form,"person_name",t)},expression:"form.person_name"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"公司地址",prop:"address"}},[r("el-select",{attrs:{placeholder:"请选择省"},on:{change:e.provinceChange},model:{value:e.form.province,callback:function(t){e.$set(e.form,"province",t)},expression:"form.province"}},e._l(e.province_list,function(t,i){return r("el-option",{key:i,attrs:{label:t.areaName,value:t.areaId,disabled:e.isShow}})}),1),e._v(" "),r("el-select",{attrs:{placeholder:"市"},on:{change:e.cityChange},model:{value:e.form.city,callback:function(t){e.$set(e.form,"city",t)},expression:"form.city"}},e._l(e.city_list,function(t,i){return r("el-option",{key:i,attrs:{label:t.areaName,value:t.areaId,disabled:e.isShow}})}),1),e._v(" "),r("el-select",{attrs:{placeholder:"区"},model:{value:e.form.area,callback:function(t){e.$set(e.form,"area",t)},expression:"form.area"}},e._l(e.area_list,function(t,i){return r("el-option",{key:i,attrs:{label:t.areaName,value:t.areaId,disabled:e.isShow}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"详细地址",prop:"address"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{placeholder:"请输入公司地址",maxlength:"30","show-word-limit":"",disabled:e.isShow},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"营业执照",prop:"license_photo"}},[r("el-col",{attrs:{span:8}},[r("el-upload",{attrs:{action:"http://39.96.29.15:9501/api/v1/upload_img","list-type":"picture-card",name:"file","show-file-list":!0,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.uploadImageSuccess,"before-upload":e.beforeAvatarUpload,"file-list":e.fileList,limit:1}},[r("i",{staticClass:"el-icon-plus"})])],1),e._v(" "),r("el-col",{attrs:{span:10}})],1),e._v(" "),r("el-form-item",{attrs:{label:"社会信用码",prop:"credit_num"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{"show-word-limit":!0,disabled:e.isShow},model:{value:e.form.credit_num,callback:function(t){e.$set(e.form,"credit_num",t)},expression:"form.credit_num"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证号",prop:"person_id_num"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{disabled:e.isShow},model:{value:e.form.person_id_num,callback:function(t){e.$set(e.form,"person_id_num",t)},expression:"form.person_id_num"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"联系电话",prop:"phone"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{disabled:!0},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"联系邮箱",prop:"email"}},[r("el-col",{attrs:{span:8}},[r("el-input",{attrs:{disabled:e.isShow},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}})],1)],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary",disabled:e.isShow},on:{click:function(t){return e.submitForm("form")}}},[e._v("提交认证")])],1)],1)],1)])},staticRenderFns:[]};var s=r("VU/8")(i,a,!1,function(e){r("IMx2")},null,null);t.default=s.exports},IMx2:function(e,t){}});
//# sourceMappingURL=7.809104f8abc216ba57fa.js.map
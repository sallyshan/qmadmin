webpackJsonp([4],{"0Z8d":function(t,e){},gQIC:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={name:"App",data:function(){return{signVisible:!1,signData:[],search:{},date_time:"",value:0,options:[1],total:1e3,limit:10,page:1,loading:!0,tableData:[]}},created:function(){this.loadData({})},mounted:function(){this.loading=!1},methods:{signUser:function(t,e,a,n){var i=this;console.log(n);var l={uid:t,task_id:e,status:a};this.$api.post("/enterprise/task/edit_user_sign",l,function(t){t.data.bol?(i.$message.success(t.data.msg),i.showSign(e,3)):i.$message.error(t.data.msg)})},showSign:function(t,e){var a=this,n=this,i={id:t,status:e};this.$api.get("/enterprise/task/sign_data",i,function(t){var e=t.data.data;e.total<=0?(a.$message.error("暂无报名"),n.signVisible=!1):(n.signData=e.list,n.signVisible=!0)})},loadData:function(t){var e=this;console.log(t);var a=t||{};a.page=this.page,a.limit=this.limit,this.$api.get("enterprise/task/list",a,function(t){e.tableData=t.data.data.list,e.total=t.data.data.total})},dateRes:function(t){var e=new Date(t);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},searchBtn:function(){var t={begin_time:this.date_time[0],end_time:this.date_time[1]};this.search=t,this.loadData(t)},handleClick:function(t){console.log(t)},del:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.$api.post("/enterprise/task/del",{id:t},function(t){t.data.bol?(e.$message.success(t.data.msg),e.loadData({})):e.$message.error(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},pageChange:function(t){this.page=t,this.loadData({})},reload:function(){window.localtion.reload()}}},i={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("el-row",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),a("el-breadcrumb-item",[a("a",{attrs:{href:"/"}},[t._v("任务列表")])])],1)],1),t._v(" "),a("el-row",{staticClass:"mt15",attrs:{gutter:5}},[a("el-col",{attrs:{xl:1,lg:1,md:3,sm:4,xs:4}},[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.reload}},[t._v("刷新")])],1),t._v(" "),a("el-col",{attrs:{xl:1,lg:1,md:3,sm:4,xs:4}},[a("el-button",{attrs:{size:"mini",type:"warning"},on:{click:function(e){return t.$router.push("/admin/task/add")}}},[t._v("新增")])],1)],1),t._v(" "),a("el-row",{staticClass:"mt15",attrs:{gutter:10}},[a("el-col",{attrs:{span:7}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",format:"yyyy-MM-dd HH:mm:ss","value-format":"yyyy-MM-dd HH:mm:ss"},model:{value:t.date_time,callback:function(e){t.date_time=e},expression:"date_time"}})],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-input",{attrs:{placeholder:"任务名称"}})],1),t._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{icon:"el-icon-search"},on:{click:t.searchBtn}},[t._v("查询")])],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt15",attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{type:"index",label:"编号",fixed:"",width:"60",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"id",prop:"id",fixed:"",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"title",label:"标题",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"logo",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"80px",height:"80px"},attrs:{src:t.row.logo}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"是否指定",width:"120",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.is_specified_people?a("div",[t._v("\n          已指定："+t._s(e.row.specified_people_list.length)+" 人\n        ")]):a("div",[t._v("\n          普通任务\n        ")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"120",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.status?a("el-button",{attrs:{type:"success",size:"mini"}},[t._v("上架中")]):t._e(),t._v(" "),2==e.row.status?a("el-button",{attrs:{type:"error",size:"mini"}},[t._v("已下架")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"city",label:"审核状态",width:"120",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[1==e.row.audit_ret?a("el-button",{attrs:{type:"success",size:"mini"}},[t._v("审核成功")]):t._e(),t._v(" "),3==e.row.audit_ret?a("el-button",{attrs:{type:"warning",size:"mini"}},[t._v("审核中")]):t._e(),t._v(" "),2==e.row.audit_ret?a("el-button",{attrs:{type:"error",size:"mini"}},[t._v("审核失败")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"报名人数",width:"120",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){return t.showSign(e.row.id,1)}}},[t._v(t._s(e.row.sign_count?e.row.sign_count:0))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"金额",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(1==e.row.type?"每单":"每小时")+" "+t._s(e.row.money)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"end_time",label:"截止日期",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"created_at",label:"创建日期",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{fixed:"right",label:"操作",width:"200",height:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"mini"}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){return t.del(e.row.id)}}},[t._v("删除")]),t._v(" "),a("el-button",{staticClass:"bm",attrs:{type:"text",size:"mini"},on:{click:function(a){return t.showSign(e.row.id,3)}}},[t._v("报名列表"),a("span",{staticStyle:{color:"red"}},[t._v("("+t._s(e.row.sign_ing>0?e.row.sign_ing:0)+")")])])]}}])})],1),t._v(" "),a("div",{staticClass:"mt15"},[a("el-pagination",{attrs:{layout:"prev, pager, next",total:t.total,"page-size":t.limit,background:!0},on:{"current-change":t.pageChange}})],1),t._v(" "),a("el-dialog",{attrs:{title:"报名人员",visible:t.signVisible,width:"700px",center:!0,"close-on-click-modal":!1},on:{"update:visible":function(e){t.signVisible=e}}},[a("el-table",{attrs:{data:t.signData}},[a("el-table-column",{attrs:{property:"nickname",label:"名字",width:"150",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{property:"name",label:"姓名",width:"200",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{attrs:{src:t.row.logo,width:"40",height:"40"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{property:"phone",label:"手机",width:"150",align:"center","header-align":"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center","header-align":"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[3==e.row.status?a("div",[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return t.signUser(e.row.uid,e.row.task_id,1,e.$index)}}},[t._v("同意")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return t.signUser(e.row.uid,e.row.task_id,2,e.$index)}}},[t._v("拒绝")])],1):t._e(),t._v(" "),3!=e.row.status?a("div",[a("el-button",{attrs:{size:"mini",type:"text"}},[t._v("已同意")])],1):t._e()]}}])})],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(n,i,!1,function(t){a("0Z8d")},null,null);e.default=l.exports}});
//# sourceMappingURL=4.02d4a40def591e32fccd.js.map
webpackJsonp([0],{"19n1":function(e,t){},"3fs2":function(e,t,r){var s=r("RY/4"),o=r("dSzd")("iterator"),i=r("/bQp");e.exports=r("FeBl").getIteratorMethod=function(e){if(void 0!=e)return e[o]||e["@@iterator"]||i[s(e)]}},BO1k:function(e,t,r){e.exports={default:r("fxRn"),__esModule:!0}},F3Qe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("BO1k"),o=r.n(s),i=(r("OS1Z"),r("pw1w"),{name:"App",data:function(){return{is_specified_v:!1,contractVisible:!1,showContractContent:"",contractTitle:"",contract_list:[],search_user_phone:"",search_user_list:[],already_user_list:[],sort_list:[],two_list:[],is_specified:"否",type_show:1,task_type:"按单",form:{title:"",logo:"",one_sort:"",two_sort:"",end_time:"",status:"1",max_people:"",type:1,message:"dssdasdadsdas",money:"",is_specified_people:2,specified_people_list:[],contract_id:"1"},toolbars:{undo:!0,bold:!0,italic:!0,header:!0,underline:!0,mark:!0,superscript:!0,quote:!0,ol:!0},rules:{title:[{required:!0,message:"请输入任务名称",trigger:"blur"}],logo:[{required:!0,message:"请上传封面",trigger:"blur"}],one_sort:[{required:!0,message:"请选择任务分类",trigger:"blur"}],end_time:[{required:!0,message:"请选择任务进行时间",trigger:"blur"}],max_people:[{required:!0,message:"请填写参加限制人数",trigger:"blur"},{min:1,max:9999,message:"人数最少1人 最多9999人",trigger:"blur"}],money:[{required:!0,message:"请输入每单佣金",trigger:"blur"},{min:1,message:"金额最少1元",trigger:"blur"}],message:[{required:!0,message:"请输入活动详细描述",trigger:"blur"}]}}},created:function(){var e=this;this.$api.get("api/v1/get_task_one_sort",{},function(t){e.sort_list=t.data.data.list}),this.getContract()},methods:{changeContract:function(e){this.form.contract_id=e},showContract:function(e){this.showContractContent=this.contract_list[e].content,this.contractTitle=this.contract_list[e].title,this.contractVisible=!0},getContract:function(){var e=this;this.$api.get("enterprise/get_contract_list",{audit_ret:1,status:1},function(t){e.contract_list=t.data.data})},addZd:function(){var e=this.search_user_list[0];if(this.already_user_list.length>=1){var t=!0,r=!1,s=void 0;try{for(var i,a=o()(this.already_user_list);!(t=(i=a.next()).done);t=!0){if(i.value.id==e.id)return this.$message.error("已经指定过该用户, 不可重复填加"),!1}}catch(e){r=!0,s=e}finally{try{!t&&a.return&&a.return()}finally{if(r)throw s}}}this.already_user_list.push(this.search_user_list[0]),this.form.specified_people_list.push(this.search_user_list[0].id),this.search_user_list.splice(0)},searchUser:function(){var e=this;""!=this.search_user_phone?this.$api.get("admin/user/list",{phone:this.search_user_phone},function(t){!1===t.data.bol||0==t.data.data.total?e.$message.error("没有找到这个人"):e.search_user_list=t.data.data.list}):this.$message.error("搜索内容不能为空")},lookContract:function(e){alert(e)},beforeAvatarUpload:function(e){var t="image/jpeg"===e.type,r=e.size/1024/1024<2;return t||this.$message.error("上传头像图片只能是 JPG 格式!"),r||this.$message.error("上传头像图片大小不能超过 2MB!"),t&&r},handleRemove:function(e,t){console.log("移除"+e)},uploadImageSuccess:function(e,t,r){this.form.logo=e.data.url},handlePictureCardPreview:function(e){console.log(e)},sortChange:function(e){var t=this;this.$api.get("api/v1/get_task_two_sort",{id:e},function(e){t.two_list=e.data.data.list,console.log(t.two_list)})},specifiedChange:function(e){"是"==e&&(this.form.is_specified_people=1,this.is_specified_v=!0),"否"==e&&(this.form.is_specified_people=2,this.is_specified_v=!1)},typeChange:function(e){"按单"==e&&(this.form.type=1,this.type_show=1),"按小时"==e&&(this.form.type=2,this.type_show=2)},dateRes:function(){var e=new Date(this.form.end_time);return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.form.end_time=t.dateRes(),console.log(t.form),t.$api.post("enterprise/task/add",t.form,function(e){e.data.bol?(t.$message.success(e.data.msg),setTimeout(function(){t.$router.push("/admin/task/list")},1500)):t.$message.error(e.data.msg)})})},resetForm:function(e){this.$refs[e].resetFields()}}}),a={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e._m(0),e._v(" "),r("div",{staticStyle:{"margin-left":"50px"}},[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(t){return e.$router.go(-1)}}},[e._v("返回")])],1),e._v(" "),r("div",[r("el-form",{ref:"form",staticClass:"mt15",attrs:{"status-icon":!0,model:e.form,rules:e.rules,"label-width":"120px","label-position":"right"}},[r("el-form-item",{attrs:{label:"任务合同",prop:"title"}},[r("el-col",{attrs:{span:24}},[r("el-radio-group",{model:{value:e.form.contract_id,callback:function(t){e.$set(e.form,"contract_id",t)},expression:"form.contract_id"}},e._l(e.contract_list,function(t,s){return r("el-radio-button",{key:s,attrs:{label:t.id},on:{change:function(r){return e.changeContract(t.id)}}},[e._v(e._s(t.title)+" \n                  "),r("div",{staticStyle:{"margin-top":"10px"}},[r("el-button",{staticStyle:{color:"#333"},attrs:{type:"text",size:"mini"},on:{click:function(t){return e.showContract(s)}}},[e._v("查看")])],1)])}),1)],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"是否指定人","hide-required-asterisk":!0}},[r("el-radio-group",{on:{change:e.specifiedChange},model:{value:e.is_specified,callback:function(t){e.is_specified=t},expression:"is_specified"}},[r("el-radio",{attrs:{label:"是"}}),e._v(" "),r("el-radio",{attrs:{label:"否"}})],1)],1),e._v(" "),e.is_specified_v?r("el-form-item",{attrs:{label:"指定人手机"}},[r("el-col",{attrs:{span:8}},[r("el-input",{model:{value:e.search_user_phone,callback:function(t){e.search_user_phone=t},expression:"search_user_phone"}})],1),e._v(" "),r("el-col",{attrs:{span:3}},[r("el-button",{attrs:{type:"text",size:"small"},on:{click:e.searchUser}},[e._v("搜索")])],1)],1):e._e(),e._v(" "),e.is_specified_v?r("el-form-item",{attrs:{label:"搜索结果"}},e._l(e.search_user_list,function(t,s){return r("el-col",{key:s,attrs:{span:4}},[r("el-card",{attrs:{shadow:"hover"}},[r("div",{attrs:{align:"center"}},[r("p",[e._v(e._s(t.nickname))]),e._v(" "),r("p",[e._v(e._s(t.phone))])]),e._v(" "),r("div",{attrs:{align:"center"}},[r("el-button",{attrs:{type:"success",size:"mini"},on:{click:e.addZd}},[e._v("添加")])],1)])],1)}),1):e._e(),e._v(" "),e.is_specified_v?r("el-form-item",{attrs:{label:"已指定"}},e._l(e.already_user_list,function(t,s){return r("el-col",{key:s,attrs:{span:4}},[r("el-card",{attrs:{shadow:"hover"}},[r("div",{attrs:{align:"center"}},[r("p",[e._v(e._s(t.nickname))]),e._v(" "),r("p",[e._v(e._s(t.phone))])])])],1)}),1):e._e(),e._v(" "),r("el-form-item",{attrs:{label:"任务名称",prop:"title"}},[r("el-col",{attrs:{span:8}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"任务封面",prop:"logo"}},[r("el-col",{attrs:{span:8}},[r("el-upload",{attrs:{action:"http://39.96.29.15:9501/api/v1/upload_img","list-type":"picture-card",name:"file","show-file-list":!0,"on-preview":e.handlePictureCardPreview,"on-remove":e.handleRemove,"on-success":e.uploadImageSuccess,"before-upload":e.beforeAvatarUpload,limit:1}},[r("i",{staticClass:"el-icon-plus"})])],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"任务分类",prop:"one_sort"}},[r("el-select",{attrs:{placeholder:"请选择任务一级分类"},on:{change:e.sortChange},model:{value:e.form.one_sort,callback:function(t){e.$set(e.form,"one_sort",t)},expression:"form.one_sort"}},e._l(e.sort_list,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1),e._v(" "),r("el-select",{attrs:{placeholder:"请选择任务二级分类"},model:{value:e.form.two_sort,callback:function(t){e.$set(e.form,"two_sort",t)},expression:"form.two_sort"}},e._l(e.two_list,function(e,t){return r("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),r("el-form-item",{attrs:{label:"结束时间",prop:"end_time"}},[r("el-col",{attrs:{span:11}},[r("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期时间"},model:{value:e.form.end_time,callback:function(t){e.$set(e.form,"end_time",t)},expression:"form.end_time"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"限制人数",prop:"max_people"}},[r("el-col",{attrs:{span:3}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.max_people,callback:function(t){e.$set(e.form,"max_people",t)},expression:"form.max_people"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"结算类型"}},[r("el-radio-group",{on:{change:e.typeChange},model:{value:e.task_type,callback:function(t){e.task_type=t},expression:"task_type"}},[r("el-radio",{attrs:{label:"按单"}}),e._v(" "),r("el-radio",{attrs:{label:"按小时"}})],1)],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==e.type_show,expression:"type_show==1"}],attrs:{label:"每单佣金",prop:"money"}},[r("el-col",{attrs:{span:3}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.money,callback:function(t){e.$set(e.form,"money",t)},expression:"form.money"}})],1)],1),e._v(" "),r("el-form-item",{directives:[{name:"show",rawName:"v-show",value:2==e.type_show,expression:"type_show==2"}],attrs:{label:"小时佣金",prop:"money"}},[r("el-col",{attrs:{span:3}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.money,callback:function(t){e.$set(e.form,"money",t)},expression:"form.money"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"任务状态"}},[r("el-switch",{attrs:{"active-text":"启用","inactive-text":"停用","active-value":"1","inactive-value":"2"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"活动描述",prop:"message"}},[r("mavon-editor",{attrs:{toolbars:e.toolbars},model:{value:e.form.message,callback:function(t){e.$set(e.form,"message",t)},expression:"form.message"}})],1),e._v(" "),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("立即创建")]),e._v(" "),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重置")])],1)],1)],1),e._v(" "),r("el-dialog",{attrs:{title:e.contractTitle,visible:e.contractVisible,width:"375px",center:!0,"close-on-click-modal":!1},on:{"update:visible":function(t){e.contractVisible=t}}},[r("div",{domProps:{innerHTML:e._s(e.showContractContent)}})])],1)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{"margin-left":"50px"}},[t("h3",[this._v("添加任务")])])}]};var n=r("VU/8")(i,a,!1,function(e){r("19n1")},null,null);t.default=n.exports},"RY/4":function(e,t,r){var s=r("R9M2"),o=r("dSzd")("toStringTag"),i="Arguments"==s(function(){return arguments}());e.exports=function(e){var t,r,a;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),o))?r:i?s(t):"Object"==(a=s(t))&&"function"==typeof t.callee?"Arguments":a}},fxRn:function(e,t,r){r("+tPU"),r("zQR9"),e.exports=r("g8Ux")},g8Ux:function(e,t,r){var s=r("77Pl"),o=r("3fs2");e.exports=r("FeBl").getIterator=function(e){var t=o(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return s(t.call(e))}}});
//# sourceMappingURL=0.41b4c04ecc52958a5e73.js.map